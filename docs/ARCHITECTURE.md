# After Hours Portal - Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AFTER HOURS PORTAL                          â”‚
â”‚                    (CamBridge Extended)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        LAYER STRUCTURE                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  TIP ALERT OVERLAY (z-index: 10000)                      â”‚   â”‚
â”‚  â”‚  - Animate.css powered                                   â”‚   â”‚
â”‚  â”‚  - "[User] tipped $X" notification                       â”‚   â”‚
â”‚  â”‚  - 3-second display with fade animations                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  UI LAYER (z-index: 1000-1001)                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚
â”‚  â”‚  â”‚ Chat Widget â”‚  â”‚Ledger Widgetâ”‚  â”‚Control Widgetâ”‚      â”‚   â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚      â”‚   â”‚
â”‚  â”‚  â”‚ - Messages  â”‚  â”‚ - Balance   â”‚  â”‚ - Room Mode â”‚      â”‚   â”‚
â”‚  â”‚  â”‚ - P2P Input â”‚  â”‚ - History   â”‚  â”‚ - Audio Tog â”‚      â”‚   â”‚
â”‚  â”‚  â”‚ - Draggable â”‚  â”‚ - Send Tip  â”‚  â”‚ - Theme Ctrlâ”‚      â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚  Widget Menu (Bottom Center)                             â”‚   â”‚
â”‚  â”‚  [ ğŸ’¬ Chat ] [ ğŸ’° Ledger ] [ âš™ï¸ Controls ]               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  VIDEO LAYER (z-index: 0)                                â”‚   â”‚
â”‚  â”‚  - Full-screen Daily.co iframe                           â”‚   â”‚
â”‚  â”‚  - WebRTC P2P video                                      â”‚   â”‚
â”‚  â”‚  - Existing CamBridge features                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AFTERHOURS CLASS                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  State:                                                          â”‚
â”‚  - activeUser: null                                              â”‚
â”‚  - tips: { balance: 0, audio: true }                            â”‚
â”‚  - audioElement: Audio('/assets/sounds/tip.mp3')                â”‚
â”‚  - currentRoom: 'public'                                         â”‚
â”‚  - widgets: Map()                                                â”‚
â”‚                                                                   â”‚
â”‚  Methods:                                                        â”‚
â”‚  â”œâ”€ processTip(user, amount)                                    â”‚
â”‚  â”‚  â””â”€> Update balance, add ledger entry, play audio, alert    â”‚
â”‚  â”œâ”€ triggerVisualAlert(user, amount)                            â”‚
â”‚  â”‚  â””â”€> Show animated tip notification                          â”‚
â”‚  â”œâ”€ makeDraggable(id)                                           â”‚
â”‚  â”‚  â””â”€> Enable mouse drag with position save                    â”‚
â”‚  â”œâ”€ saveLayout(id, top, left)                                   â”‚
â”‚  â”‚  â””â”€> Persist to localStorage                                 â”‚
â”‚  â”œâ”€ loadLayout(id)                                              â”‚
â”‚  â”‚  â””â”€> Restore from localStorage                               â”‚
â”‚  â”œâ”€ switchRoom(type)                                            â”‚
â”‚  â”‚  â””â”€> Leave current, join new Daily.co room                   â”‚
â”‚  â”œâ”€ updateTheme(color)                                          â”‚
â”‚  â”‚  â””â”€> Set --accent CSS variable                               â”‚
â”‚  â””â”€ updateGlassOpacity(opacity)                                 â”‚
â”‚     â””â”€> Set --glass-opacity CSS variable                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    P2P MESSAGE FLOW                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  User A                         Daily.co Cloud                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚Clientâ”‚â—„â”€â”€â”€â”€WebRTC P2Pâ”€â”€â”€â”€â”€â”€â–ºâ”‚ Signalingâ”‚                     â”‚
â”‚  â””â”€â”€â”¬â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚     â”‚                               â”‚                            â”‚
â”‚     â”‚ sendAppMessage({              â”‚                            â”‚
â”‚     â”‚   type: 'chat',               â”‚                            â”‚
â”‚     â”‚   message: 'Hello',           â”‚                            â”‚
â”‚     â”‚   sender: 'Alice'             â”‚                            â”‚
â”‚     â”‚ })                            â”‚                            â”‚
â”‚     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                            â”‚
â”‚     â”‚                               â”‚                            â”‚
â”‚     â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                 â”‚
â”‚     â”‚                                           WebRTC P2P       â”‚
â”‚     â”‚                                           User B           â”‚
â”‚     â”‚                                           â”Œâ”€â”€â”€â”€â”€â”€â”         â”‚
â”‚     â”‚                                           â”‚Clientâ”‚         â”‚
â”‚     â”‚                                           â””â”€â”€â”¬â”€â”€â”€â”˜         â”‚
â”‚     â”‚                                              â”‚             â”‚
â”‚     â”‚                                on('app-message', event)    â”‚
â”‚     â”‚                                handleAppMessage(event)     â”‚
â”‚     â”‚                                              â”‚             â”‚
â”‚     â”‚                                if type === 'chat':         â”‚
â”‚     â”‚                                  addChatMessage()          â”‚
â”‚     â”‚                                if type === 'tip':          â”‚
â”‚     â”‚                                  Portal.processTip()       â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   STORAGE ARCHITECTURE                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  LocalStorage Keys:                                              â”‚
â”‚  - pos-chat-widget: {top, left}                                 â”‚
â”‚  - pos-ledger-widget: {top, left}                               â”‚
â”‚  - pos-controls-widget: {top, left}                             â”‚
â”‚  - theme-accent: "#00ff88"                                      â”‚
â”‚  - glass-opacity: 85                                            â”‚
â”‚                                                                   â”‚
â”‚  NOT Stored (Privacy):                                           â”‚
â”‚  - Chat messages (ephemeral only)                               â”‚
â”‚  - Tip transaction details (display only)                       â”‚
â”‚  - User identities                                              â”‚
â”‚  - Video/audio streams                                          â”‚
â”‚  - Any conversation content                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ROOM ARCHITECTURE                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Environment Variables:                                          â”‚
â”‚  - DAILY_URL: https://your-domain.daily.co/Public               â”‚
â”‚  - PRIVATE_ROOM_URL: https://your-domain.daily.co/Private       â”‚
â”‚                                                                   â”‚
â”‚  Room Switch Flow:                                               â”‚
â”‚  1. User clicks "Private" in Controls Widget                    â”‚
â”‚  2. Portal.switchRoom('private') called                         â”‚
â”‚  3. dailyCall.leave() exits current room                        â”‚
â”‚  4. dailyCall.join({ url: PRIVATE_ROOM_URL })                   â”‚
â”‚  5. Video reconnects with new peer in private room              â”‚
â”‚                                                                   â”‚
â”‚  Access Control:                                                 â”‚
â”‚  - Both rooms use same ACCESS_KEY (gatekeeper)                  â”‚
â”‚  - Private room URL can be different/secured                    â”‚
â”‚  - No additional authentication layer                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  THEME SYSTEM FLOW                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. Page Load                                                    â”‚
â”‚     â””â”€> Portal.loadTheme()                                      â”‚
â”‚         â””â”€> Read localStorage                                   â”‚
â”‚             â””â”€> Set CSS variables                               â”‚
â”‚                                                                   â”‚
â”‚  2. User Changes Color                                           â”‚
â”‚     â””â”€> <input type="color"> change event                       â”‚
â”‚         â””â”€> Portal.updateTheme(newColor)                        â”‚
â”‚             â”œâ”€> document.documentElement.style                  â”‚
â”‚             â”‚   .setProperty('--accent', newColor)              â”‚
â”‚             â””â”€> localStorage.setItem('theme-accent')            â”‚
â”‚                                                                   â”‚
â”‚  3. User Changes Opacity                                         â”‚
â”‚     â””â”€> <input type="range"> input event                        â”‚
â”‚         â””â”€> Portal.updateGlassOpacity(value)                    â”‚
â”‚             â”œâ”€> setProperty('--glass-opacity', value/100)       â”‚
â”‚             â””â”€> localStorage.setItem('glass-opacity')           â”‚
â”‚                                                                   â”‚
â”‚  Effect: All widgets update in real-time                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   WIDGET LIFECYCLE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Initialization (on video connect):                             â”‚
â”‚  1. initializeAfterHours() called                               â”‚
â”‚  2. Make each widget draggable                                  â”‚
â”‚  3. Load saved positions from localStorage                      â”‚
â”‚  4. Attach event listeners:                                     â”‚
â”‚     - Toggle buttons (show/hide)                                â”‚
â”‚     - Close buttons (hide)                                      â”‚
â”‚     - Chat input/send                                           â”‚
â”‚     - Tip amount/send                                           â”‚
â”‚     - Room switcher                                             â”‚
â”‚     - Theme controls                                            â”‚
â”‚  5. Setup Daily.co message handler                              â”‚
â”‚                                                                   â”‚
â”‚  User Interaction:                                               â”‚
â”‚  - Click widget menu icon â†’ toggleWidget()                      â”‚
â”‚  - Drag widget header â†’ makeDraggable() â†’ saveLayout()          â”‚
â”‚  - Click close button â†’ hide widget                             â”‚
â”‚  - Type message â†’ sanitize â†’ sendAppMessage()                   â”‚
â”‚  - Enter tip amount â†’ send â†’ processTip() on remote             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
